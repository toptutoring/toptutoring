<div class="container text-center">
  <legend><i class="glyphicon glyphicon-lock color-grey"></i> Secure Credit Card</legend>
</div>

<div class="text-center col-md-8 col-md-offset-2">
  <p>Note: All fields are required.</p>
  <p>This page is protected through secure SSL encrypted payment.</p>

  <%= form_tag url_for(:controller => 'one_time_payments', :action => 'create', method: :post), class: "form-horizontal", id: "payment-form" do |f| %>

    <fieldset class="credit_card">

      <div class="form-group">
        <div class="col-sm-2"></div>
        <span class="payment-errors alert-danger col-sm-7"></span>
      </div>

      <div class="form-group">
        <div class="col-sm-2"></div>
        <label for="amount" class="col-sm-2 control-label">Amount</label>
        <div class="col-sm-3">
          <input type="number" class="form-control col-sm-3 input-sm" name="payments[amount]" min="0">
          </input>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2"></div>
        <label for="description" class="col-sm-2 control-label">Description</label>
        <div class="col-sm-3">
          <input type="text" class="form-control col-sm-3 input-sm"  name="payments[description]">
          </input>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2"></div>
        <label for="card-holder-name" class="col-sm-2 control-label">Card Holder's Name</label>
        <div class="col-sm-3">
          <input type="text" class="form-control col-sm-3 input-sm"  data-stripe="name" title="This is the name as written on your credit card.">
          </input>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2"></div>
        <label for="credit-card-number" class="col-sm-2 control-label">Credit Card</label>
        <div class="col-sm-3">
          <input type="text" class="form-control col-sm-3 input-sm"  data-stripe="number" title="Fill in your credit card number.">
          </input>
        </div>
        <img src="/img/credit-card-icons.png" class="img-responsive col-sm-2"></img>
      </div>

      <div class="form-group">
        <div class="col-sm-2"></div>
        <label for="exp" class="col-sm-2 control-label">Expiration</label>
        <div class="controls">

          <div class="col-sm-2">
           <%= select_month(Date.today, {add_month_numbers: true},  class: 'form-control input-sm', name: nil, data: {stripe: "exp-month"}) %>
          </div>

          <div class="col-sm-1">
              <%= select_year(Date.today.year, {start_year: Date.today.year, end_year: Date.today.year + 4}, class: 'form-control input-sm', name: nil, data: {stripe: "exp-year"}) %>
          </div>

          <%= hidden_field_tag :token %>

        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-2"></div>
        <label for="cvv-code" class="col-sm-2 control-label">CVV</label>
        <div class="col-sm-2 col-cvv-fixed-width">
          <input type="text" class="form-control input-sm"  data-stripe="cvc" size="4"></input>
        </div>

        <script>
        $(function ()
        { $("#cvv").popover({
          trigger: 'hover'
          });
        });
        </script>

        <a id="cvv" class="col-sm-2" data-content="<strong>Visa速, Mastercard速, and Discover速 cardholders:</strong><p>Turn your card over and look at the signature box. You should see either the entire 16-digit credit card number or
  just the last four digits followed by a special 3-digit code. This 3-digit code is your CVV number / Card Security Code.</p><strong> American Express速 cardholders:</strong><p>Look for the 4-digit code printed on the front of your card just above and to the right of your main credit card number. This 4-digit code is your Card Identification Number (CID). The CID is the four-digit code printed just above the Account Number.</p>" data-placement="right" data-toggle="popover" class="btn" data-original-title="Card Verification Number" data-html="true" style="font-size:11px">What is my CVV code?</a>

      </div>
    </fieldset>

    <div class="form-group">
    <div class="col-sm-5"></div>
    <input type="submit" value="Pay" class="btn col-sm-2 payment_submit">
    </input>
  </div>

  <% end %>
</div>

<script type="text/javascript" src="https://js.stripe.com/v2/"></script>
