<div class="widget">
  <div class="widget-heading clearfix">
    <h3 class="widget-title pull-left">Your Tutors</h3>
    <!-- begin widget -->
    <div class="widget-body">
      <% if @engagements.empty? %>
        <!-- Request a Tutor -->
        <p>We are in process of looking for you tutor. We will let you know as soon as we find the perfect match for your academic journey!</p>
      <% else %>
        <div class="table-responsive mt-15 mb-0">
          <table class="table mb-0 table-striped table-hover">
            <thead>
              <tr>
                <th class="col-lg-3 col-sm-2">Tutor</th>
                <th class="col-lg-3 col-sm-2">Student</th>
                <th class="col-lg-4 col-sm-3">Subject</th>
                <th class="col-lg-1 col-sm-1">Type</th>
                <th class="col-lg-1 col-sm-1"></th>
              </tr>
            </thead>
            <% @engagements.each do |engagement| %>
              <tr>
                <td><%= engagement.tutor ? engagement.tutor.name : 'Pending' %></td>
                <td><%= engagement.student_name %></td>
                <td><%= engagement.subject %></td>
                <td><%= engagement.academic_type %></td>
                <td>
                  <% if engagement.availabilities.empty? %>
                    <% availability_url = new_availability_url(engagement.availabilities.build) %>
                  <% else %>
                    <% availability_url = edit_availability_path(engagement.availabilities.last) %>
                  <% end %>
                  <a class="pull-right" data-toggle="tooltip" title="Let us know when you are available for this tutor." href="<%= availability_url %>"><i class="ion-clock fs-18"></i></a>
                </td>
              </tr>
            <% end %>
          </table>
        </div>
      <% end %>
    <!-- end of widget -->
    </div>
  </div>
</div>
